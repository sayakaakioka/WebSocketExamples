# バイナリデータの送受信サンプル

[echo](../echo/)の例では、送受信できるのは文字列のみだった。
ここに置いてあるサンプルでは、画像などのバイナリデータを扱う
（ただし、数字などは文字列に変換して送受信するのが通例）。

ここで、Processing用のWebSocketライブラリは文字列の送受信しかできない。
仕方がないので、画像データは文字列に変換してから送受信することにする。
つまり、画像を送信するプログラムは、画像を文字列に変換してから送信する。
画像を受信するプログラムは受け取った文字列を画像に戻して表示する。
画像を文字列に変換する時や、文字列を画像に戻す時には、
Base64という仕様に基づいて変換することにする。

ファイルの構成は以下の通り。

* [server.js](./server.js):
    サーバプログラム。
    [echo](../echo/)の[server.js](../echo/server.js)との差分は、受け取ったデータを
    サーバ側で表示しないようにしたことのみ（超長い文字列が表示されるだけだから）。
    コメントが少ないから、こちらの方が少し読みやすいかも？
* [client.html](./client.html):
    受信した画像を表示するプログラム。
    送信もできるが入れていないので、必要な場合は相談すること。
* [client.pde](./client/client.pde):
    Processing版クライアントプログラム。
    制御プログラムやデータ分析プログラムなどのProcessingで書かれたプログラムでデータを送受信する場合には、
    このプログラムを参考にして書けば良い。
    カメラから画像をキャプチャして送信する処理を繰り返す。受信した画像があればウィンドウに表示する。

なお、[client.pde](./client/client.pde)には、
ファイルから画像を読み込んで送信するコードもコメントとして書かれている。
カメラが使えない環境で画像の送信テストをしたい場合には、参考にするとよい。
