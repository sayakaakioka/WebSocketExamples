# 文字列と画像の両方を送受信するサンプル

[echo](../echo/)では、文字列の送受信ができるようにした。
[binary](../binary/)では、画像の送受信ができるようにした。
ここに置いてあるサンプルでは、文字列と画像の両方を送受信できるようにする。

実際には、送受信するデータ本体の前に、文字列なのか画像なのかを示す情報を
付加して送信する。データを受信したら、先頭の情報でデータの種類を判別し、
文字列としてそのまま使うか、画像に変換するかを決める。
送受信するデータのフォーマットは以下の通り。
JPG 以外の画像形式が必要な場合は相談すること。

- JPG 画像の場合: `data:image/jpeg;base64,Base64で変換後の文字列`
- 文字列の場合: `data:,任意の文字列`

ファイルの構成は以下の通り。

- [client.html](./client.html):
  受信した画像を表示するプログラム。
  ボタンを押すと定型文を送信する。
  受信したデータは、画像用キャンバスやテキスト用キャンバスに表示する。
  送信は文字列の送信のみ実装してあるので、画像の送信が必要な場合は相談すること。
  HTML 版では、上記フォーマットに従った JPG データは、そのまま画像として出力できる。
- [client.pde](./client/client.pde):
  Processing 版クライアントプログラム。
  カメラからキャプチャした画像を送り続けると同時に、テキストをひとつ送信する。
  受信したデータは画像は普段通りに表示し、テキストは黒い画面に表示する。
  制御プログラムやデータ分析プログラムなどの Processing で書かれたプログラムでデータを送受信する場合には、
  このプログラムを参考にして書けば良い。
