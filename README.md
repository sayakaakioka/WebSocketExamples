# WebSocketExamples

WebSocket を用いたサーバプログラムやクライアントプログラムのサンプルいろいろ。

Processing で書かれたクライアントプログラムを動かすには、[Processing](https://processing.org)が動いており、Websockets ライブラリがインストールされている必要がある。

## ここに置いてあるソースコードの説明

右上の辺りにある「Code」ボタンを押すと現れる「Download ZIP」を選ぶと、ここにあるファイルを全て
zip ファイルに固めたものをダウンロードすることができる。プログラムは以下のように各ディレクトリに
整理されている。

- [echo](./echo/):
  1 番シンプルなサンプル。
  クライアントが送信した文字列を全員に送信するサーバプログラムとクライアントプログラム。
- [binary](./binary/):
  [echo](./echo/)を改良して、画像を送受信できるようにしたサンプル。
- [multi](./multi/):
  [echo](./echo/)や[binary](./binary/)を改良して、文字列も画像も送受信できるようにしたサンプル。
- ~~[mention](./mention/):
  [echo](./echo/)を改良して、特定のクライアントのみにメッセージを送信できるようにしたサンプル。~~

カメラ画像を送受信するときには、画像を文字列に変換する必要がある。
変換方法は[Base64Check](./Base64Check/client/client.pde)を参考にすること。
JavaScript で同様の処理が必要な場合は相談すること。

### クライアントプログラム（HTML 版）

クライアントプログラムを起動する前に、サーバプログラムが起動済みであることを確認すること。
また、ソースコードの先頭辺りを見て、サーバの設定が合っているか確認すること。

`client.html`をブラウザで開く。
ブラウザによりファイルの開き方は多少異なるが、多くの場合は、メニューの「ファイル」の中にある「ファイルを開く」で
開くファイルを選ぶことができる。

ブラウザは何を使っても良いが、Google Chrome が無難かも。
右上の設定ボタンから「その他のツール」を選ぶと現れる「デベロッパツール」があるとデバッグが楽になる。

### クライアントプログラム（Processing 版）

起動する前に、サーバプログラムが起動済みであることを確認すること。
また、ソースコードの先頭辺りを見て、サーバの設定が合っているか確認すること。
ライブラリがインストールされていることを確認すること。

起動自体は、いつも通り、`client`ディレクトリの中の`client.pde`をクリックすることで起動する。

## 参考文献

実装したい機能と言語をキーワードにググるのが、一番有効。色々なプログラムが引っかかってくる。
より一般的な実装方法ほど、多くの人が実装して公開してくれているので、いくつか見比べながら書くと良い。

[ws の本家](https://github.com/websockets/ws)にある
[API ドキュメント](https://github.com/websockets/ws/blob/master/doc/ws.md)
を見ると、利用可能なイベントや関数などが一覧できる。

Processing 用の WebSocket ライブラリの[本家](https://github.com/alexandrainst/processing_websockets)も参考になる。
